<!DOCTYPE html>
<html ng-app="myapp">
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<script src="https://code.angularjs.org/1.3.15/angular.js"></script>
<script src="../build/scripts/ng-map.debug.js"></script>
<script>
  var app = angular.module('myapp', ['ngMap']);
  app.controller('LayerHeatmapCtrl', [ 'NgMapPool', '$timeout', '$scope', function(NgMapPool, $timeout, $scope) {
    var vm = this;

    vm.draw = {
      mode: 'null',
      options: {
        drawingControlOptions: {
          position: 'TOP_CENTER',
          drawingModes: ['POLYGON','MARKER']
        }
      }
    };

    vm.events = [];
    vm.events.push({
      type: 'overlaycomplete',
      func: function (obj) {
        console.log(obj.type.toUpperCase());
        console.log('DrawModes', vm.draw.options.drawingControlOptions.drawingModes);
        $scope.$apply(function () {
          vm.draw.mode = null;
          var index = vm.draw.options.drawingControlOptions.drawingModes.indexOf(obj.type.toUpperCase());
          if (index > -1) {
            vm.draw.options.drawingControlOptions.drawingModes.splice(index, 1);
          }
        });


      }
    });

    NgMapPool.getMap().then(function(ngMap) {
       $timeout(function () {

         vm.draw.options.drawingControlOptions.position = 'BOTTOM_CENTER';
    }, 4000);

    $timeout(function () {
         //vm.draw.options.drawingControl = false;
    }, 8000);

    });

  }]);
</script>
</head>
<body>
  <div ng-controller="LayerHeatmapCtrl as vm">
    <ng-map>
      <drawing-manager drawing-manager-options="vm.draw.options" drawing-manager-events="vm.events" drawing-manager-mode="vm.draw.mode"></drawing-manager>
    </ng-map>
  </div>
</body>
</html>
